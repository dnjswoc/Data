# 집SEEK 프로젝트 개발 관련 readme!

### 20250315(토)

- activity log(comment) dummy data 생성

  - Elasticsearch를 활용한 액티비리 로그 관련 고려 사항

    - 액티비티 로그가 계속 쌓이면 용량이 커질 수 있음
    - 예를 들어 3~6개월 치 데이터만 유지하고 오래된 데이터는 삭제하는 방법 고려(Index Lifecycle Management 활용)

  - timestamp 포맷

    - ISO 8601 포맷(YYYY-MM-DDTHH:MM:SSZ)를 사용하면 시간 정렬 & 분석 용이
    - Elasticsearch는 기본적으로 `date` 타입을 지원하므로, 인덱스 매핑을 설정하면 좋음

      ```json
      {
        "properties": {
          "timestamp": { "type": "date" }
        }
      }
      ```

  - IP 주소 & User-Agent(디바이스 정보)

    - 사용자의 환경을 추적하려면 IP 주소 및 디바이스 정보(User-Agent) 저장 고려
      ```json
      "ip_address": "192.168.1.1",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64)"
      ```
    - 특정 기기에서의 행동 패턴 분석, 부정 행위 탐지(예 : 동일 IP에서 다수의 찜) 가능

  - session_id (세션 정보)

    - 특정 유저의 활동 흐름을 분석하려면 세션 ID 저장이 유용함
      ```JSON
      "session_id": "abc123xyz"
      ```
    - 유저의 연속적인 행동 패턴 분석(예 : 특정 매물 조회 후 찜 여부) 가능


  - 데이터 정규화 vs 중복 저장

    - 현재 `destination`(목표 장소), `dest_address`(실제 주소) 등 문자열 데이터를 중복 저장
    - `destination_id`를 부여하고 별도 테이블 관리 가능(굳이??)
    - Elasticsearch에선 `nested` 필드나 `keyword` 타입을 적절히 활용하면 성능 문제 없이 처리 가능
    - Elasticsearch는 중복 데이터 저장 부담이 RDBMS 보다 적음, 현재 구조 그대로 유지해도 문제 없음


### 20250318(화)

- 동네 점수 계산용 데이터 전처리

  - 대중교통 점수를 제외한 다른 점수 데이터는 SGIS의 살기 좋은 우리동네를 통해 읍면동 단위 별 혹은 시군구 단위 별 점수 항목에 해당하는 개수를 크롤링 해왔다.
  - 하지만, 대중교통 점수는 실제와 맞지 않다는 생각이 들어서(강남구에 위치한 버스 정류장 및 지하철 역 개수가 50여개라고..?) 다른 데이터를 구해와야겠다고 생각했다.
  - 그래서, 서울시 열린 데이터 광장에서 서울시 버스 정류장 위치 데이터와 지하철역(GEOM마스터) 데이터를 활용해야겠다고 생각했다.
  - 데이터들을 가져와 보니 구와 동 이름이 있는 칼럼이 존재하지 않고, 위도와 경도 칼럼이 존재해서 이를 활용해서 구와 동 이름을 변환해야겠다고 생각했다.
  - 카카오 맵 api를 활용해서 위도와 경도 좌표를 주고 구와 동 이름을 가져올 수 있도록 코드를 작성하여 csv 파일을 완성했다.



### 20250320(목)

- 내일(20250321) 발표 준비

  - 아키텍쳐 다이어그램 제작

    - 아키텍쳐 다이어그램을 그리기 위해 실제 프로젝트가 어떤 방식으로 진행되는지 GPT 검색도 조금 해보고, 승훈이와 많이 대화를 나눴다.
    
    ![alt text](images/집SEEK_architecture_diagram.png)


- 매물 점수 계산용 데이터 전처리

  - 카카오 맵 api를 사용해서 구 이름과 동 이름을 구분하여 csv 파일로 만들었다.
  - 하지만, 동 이름이 법정동명으로 나와있어서 DB에 저장할 수가 없었다.
  - 그래서 카카오 맵 api를 다시 사용하여 행정동 이름을 구할 수 있게 처리하였다.
  - 겉보기엔 행정동 이름으로 잘 처리된 것 같지만, 이 이름도 원래 동네 이름 테이블에 저장된 이름과 맞지 않아서 어디가 잘못된 건지 다시 찾아봐야 할 것 같다.


### 20250321(금)

- 매물 점수 계산용 데이터 전처리

  - 어제 행정동 이름이 잘못 처리돼 DB에 들어가지 않는 문제점을 찾았다. 동 이름을 일일이 비교해 뭐가 다른지 찾는 작업을 했다.
  - 행정동 이름 중에는 '종로1·2·3·4가동' 등 ·이 들어가는 행정동이 있는데, DB에 저장되어 있는 dong 테이블에는 '·'으로 되어 있지만, 항목 계산 데이터에는 '.'으로 되어있어 맞지 않아 DB 등록을 할 수 없었던 것이다.
  - 그래서 '.'을 '·'로 바꾸는 작업을 거쳤지만, 그래도 맞지 않는 데이터가 있는 것이다.
  - 카카오 맵 api를 통해 얻은 데이터 중 '면목제3·8동'이란 값이 있는데, 실제 dong 테이블에는 '면목3·8동'만 되어 있어 다르게 된 것이다.
  - 그래서, '면목제3·8동'을 '면목3·8동'으로 바꿔 비교해보니 다른 값이 없었다.
  - 근데, 대중교통 데이터에서는 다른 값들이 여전히 많았는데 그 이유는 서울시에 위치한 정보만 있는게 아니라 인천, 경기까지 이어지는 노선에 대한 데이터라 인천, 경기에 위치한 정류장 및 역도 등장하여 생기는 문제 때문이었다.
  - 서울시 밖에 위치한 데이터를 처리하는 것은 금요일 오전에 다시 해봐야겠다.


- 여가 점수 문제

  - 여가 점수를 내는 항목 중에는 `공원`, `공연장`, `박물관`, `영와관` 등이 있다.
  - 여기서 공연장과 영화관 데이터를 살펴보면 한 영화관이나 공연장 안에서 1관, 2관 등으로 나뉜 것도 개별 데이터로 계산이 되어 이것을 처리해야 함