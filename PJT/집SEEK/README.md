# 집SEEK 프로젝트 개발 관련 readme!

### 20250315(토)

- activity log(comment) dummy data 생성

  - Elasticsearch를 활용한 액티비리 로그 관련 고려 사항

    - 액티비티 로그가 계속 쌓이면 용량이 커질 수 있음
    - 예를 들어 3~6개월 치 데이터만 유지하고 오래된 데이터는 삭제하는 방법 고려(Index Lifecycle Management 활용)

  - timestamp 포맷

    - ISO 8601 포맷(YYYY-MM-DDTHH:MM:SSZ)를 사용하면 시간 정렬 & 분석 용이
    - Elasticsearch는 기본적으로 `date` 타입을 지원하므로, 인덱스 매핑을 설정하면 좋음

      ```json
      {
        "properties": {
          "timestamp": { "type": "date" }
        }
      }
      ```

  - IP 주소 & User-Agent(디바이스 정보)

    - 사용자의 환경을 추적하려면 IP 주소 및 디바이스 정보(User-Agent) 저장 고려
      ```json
      "ip_address": "192.168.1.1",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64)"
      ```
    - 특정 기기에서의 행동 패턴 분석, 부정 행위 탐지(예 : 동일 IP에서 다수의 찜) 가능

  - session_id (세션 정보)

    - 특정 유저의 활동 흐름을 분석하려면 세션 ID 저장이 유용함
      ```JSON
      "session_id": "abc123xyz"
      ```
    - 유저의 연속적인 행동 패턴 분석(예 : 특정 매물 조회 후 찜 여부) 가능


  - 데이터 정규화 vs 중복 저장

    - 현재 `destination`(목표 장소), `dest_address`(실제 주소) 등 문자열 데이터를 중복 저장
    - `destination_id`를 부여하고 별도 테이블 관리 가능(굳이??)
    - Elasticsearch에선 `nested` 필드나 `keyword` 타입을 적절히 활용하면 성능 문제 없이 처리 가능
    - Elasticsearch는 중복 데이터 저장 부담이 RDBMS 보다 적음, 현재 구조 그대로 유지해도 문제 없음


### 20250318(화)

- 동네 점수 계산용 데이터 전처리

  - 대중교통 점수를 제외한 다른 점수 데이터는 SGIS의 살기 좋은 우리동네를 통해 읍면동 단위 별 혹은 시군구 단위 별 점수 항목에 해당하는 개수를 크롤링 해왔다.
  - 하지만, 대중교통 점수는 실제와 맞지 않다는 생각이 들어서(강남구에 위치한 버스 정류장 및 지하철 역 개수가 50여개라고..?) 다른 데이터를 구해와야겠다고 생각했다.
  - 그래서, 서울시 열린 데이터 광장에서 서울시 버스 정류장 위치 데이터와 지하철역(GEOM마스터) 데이터를 활용해야겠다고 생각했다.
  - 데이터들을 가져와 보니 구와 동 이름이 있는 칼럼이 존재하지 않고, 위도와 경도 칼럼이 존재해서 이를 활용해서 구와 동 이름을 변환해야겠다고 생각했다.
  - 카카오 맵 api를 활용해서 위도와 경도 좌표를 주고 구와 동 이름을 가져올 수 있도록 코드를 작성하여 csv 파일을 완성했다.



### 20250320(목)

- 내일(20250321) 발표 준비

  - 아키텍쳐 다이어그램 제작

    - 아키텍쳐 다이어그램을 그리기 위해 실제 프로젝트가 어떤 방식으로 진행되는지 GPT 검색도 조금 해보고, 승훈이와 많이 대화를 나눴다.
    
    ![alt text](images/집SEEK_architecture_diagram.png)


- 매물 점수 계산용 데이터 전처리

  - 카카오 맵 api를 사용해서 구 이름과 동 이름을 구분하여 csv 파일로 만들었다.
  - 하지만, 동 이름이 법정동명으로 나와있어서 DB에 저장할 수가 없었다.
  - 그래서 카카오 맵 api를 다시 사용하여 행정동 이름을 구할 수 있게 처리하였다.
  - 겉보기엔 행정동 이름으로 잘 처리된 것 같지만, 이 이름도 원래 동네 이름 테이블에 저장된 이름과 맞지 않아서 어디가 잘못된 건지 다시 찾아봐야 할 것 같다.